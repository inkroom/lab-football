<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd">

    <!--拦截器-->
    <mvc:interceptors>
        <!--后缀拦截器-->
        <mvc:interceptor>
            <mvc:mapping path="/**"/>
            <mvc:exclude-mapping path="/resources/**"/>
            <bean class="cn.nsu.edu.web.four.interceptors.SuffixInterceptor"/>
        </mvc:interceptor>

        <!--自动登录拦截器-->
        <mvc:interceptor>
            <mvc:mapping path="/referee/**"/>
            <mvc:exclude-mapping path="/referee/login"/>
            <bean class="cn.nsu.edu.web.four.interceptors.AutoLoginInterceptor"/>
        </mvc:interceptor>
        <!--token拦截器，负责创建和拦截token-->
        <mvc:interceptor>
            <mvc:mapping path="/**"/>

            <mvc:exclude-mapping path="/500"/>
            <mvc:exclude-mapping path="/404"/>
            <mvc:exclude-mapping path="/401"/>
            <mvc:exclude-mapping path="/resources/**"/>
            <bean class="cn.nsu.edu.web.four.interceptors.TokenInterceptor">
                <!--需要写成绝对路径，参数为页面显示的消息-->
                <property name="tokenErrorUrl" value="/message?m=页面过期"/>
            </bean>
        </mvc:interceptor>
        <!--权限拦截器-->
        <mvc:interceptor>
            <mvc:mapping path="/**"/>

            <mvc:exclude-mapping path="/**/login"/>
            <mvc:exclude-mapping path="/**/logout"/>
            <mvc:exclude-mapping path="/500"/>
            <mvc:exclude-mapping path="/404"/>
            <mvc:exclude-mapping path="401"/>
            <mvc:exclude-mapping path="/resources/**"/>
            <bean class="cn.nsu.edu.web.four.interceptors.SecurityInterceptor">
            </bean>
        </mvc:interceptor>

        <!--裁判完善身份拦截器-->
        <mvc:interceptor>
            <mvc:mapping path="/referee/**"/>

            <mvc:exclude-mapping path="/**/login"/>
            <!--<mvc:exclude-mapping path="/**/logout"/>-->
            <!--<mvc:exclude-mapping path="/resources/**"/>-->

            <mvc:exclude-mapping path="/referee/consummate"/>
            <mvc:exclude-mapping path="/referee/consummateIndex"/>
            <bean class="cn.nsu.edu.web.four.interceptors.RefereeInterceptor"/>
        </mvc:interceptor>

        <!--赛程结束拦截器-->
        <mvc:interceptor>
            <mvc:mapping path="/referee/**"/>


            <!--直播url-->
            <mvc:mapping path="/live/**"/>

            <mvc:exclude-mapping path="/live/ssss"/>
            <mvc:exclude-mapping path="/live/image"/>
            <mvc:exclude-mapping path="/referee/login"/>

            <bean class="cn.nsu.edu.web.four.interceptors.ScheduleInterceptor">
                <!--移动端结束比赛url-->
                <property name="endMobileUrl" value="/end"/>
                <!--pc端结束比赛url-->
                <property name="endUrl" value="/message"/>
            </bean>
        </mvc:interceptor>


        <!--<mvc:interceptor>-->
        <!--<mvc:mapping path="/match/createMatch"/>-->
        <!--<bean class="cn.nsu.edu.web.four.interceptors.TestInterceptor"/>-->
        <!--</mvc:interceptor>-->
    </mvc:interceptors>


</beans>