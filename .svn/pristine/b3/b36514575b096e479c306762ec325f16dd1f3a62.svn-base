package cn.nsu.edu.web.four.controllers;

import cn.nsu.edu.web.four.annotation.Authority;
import cn.nsu.edu.web.four.dto.ctv.MessageDto;
import cn.nsu.edu.web.four.enums.Result;
import cn.nsu.edu.web.four.enums.Role;
import cn.nsu.edu.web.four.services.DemoService;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

import javax.servlet.http.HttpServletRequest;

/**
 * 需要加上模块url前缀
 */
@Controller
@RequestMapping("/demo/")
public class DemoController {

    @Autowired
    private HttpServletRequest request;
    //输出使用日志输出，禁止使用System.out
    private Logger log = LoggerFactory.getLogger(getClass());


    //获取下一层实例
    @Autowired
    private DemoService service;


    /**
     * 跳转到页面
     * @return
     */
    @RequestMapping(value = "index",method = RequestMethod.GET)
    public String index(){
        return "";
    }

    /**
     * 返回json数据的用法
     * @return
     */
    @RequestMapping("testJson")
    @ResponseBody
    public MessageDto testJson(){

        MessageDto dto = new MessageDto(Result.SUCCESS);
        dto.setMessage("该方法仅在失败时使用，以提供前台错误信息");
        //使用该方法传递额外的数据
        dto.put("other","");
//        return new Me
        return dto;
    }

    /**
     * 权限注解使用方法
     * @return
     */
    @RequestMapping("/testAuthority")
    @Authority(roles = {Role.SCHOOL,Role.ORGANIZATION})
    public String testAuthority(){
        return "";
    }


}
