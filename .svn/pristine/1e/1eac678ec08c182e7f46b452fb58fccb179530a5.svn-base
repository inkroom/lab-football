<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:set var="path" value="${pageContext.request.contextPath}"/>
<html>
<head>
    <title>球员注册</title>
    <link rel="stylesheet" type="text/css" href="${path}/resources/lib/bootstrap/bootstrap.min.css"/>
    <link rel="stylesheet" type="text/css" href="${path}/resources/css/player/style.1.0.css"/>

</head>
<body>
<div class="sl-bg">
    <div class="container">
        <div class="row">
            <br>
            <div class="col-xs-6 col-xs-offset-3">
                <div class="login_bg text-center">
                    <!--注册面板标题-->
                    <br>
                    <div class="logo-w2 col-xs-10 col-xs-offset-1 form-group">
                        <!--<img src="img/logo足球项目组.png">-->
                        <span class="title" style="color: green; font-size: 25px;">四川省青少年足球信息化</span>
                    </div>
                    <div class="logo-w2 col-xs-10 col-xs-offset-1 form-group">
                        <span class="title" style="color: green; font-size: 22px;">————球员注册————</span>
                    </div>
                    <!--注册面板表单-->
                    <form  id="register1" method="post">
                        <div class="form-horizontal" role="form">
                            <!--用户名-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                        <span class="input-group-addon">
                                            <i class="glyphicon glyphicon-user"></i>
                                        </span>
                                    <div class="change_margin_1 input-group" style="width: 100%;">
                                        <input id="yhm" name="userName" class="user form-control"  placeholder="请输入用户名：6-12位" minlength="6" maxlength="12" type="text">
                                    </div>
                                </div>
                                <span id="yhmts" style="color: red">用户名输入错误</span>
                            </div>

                            <%--姓名--%>
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                        <span class="input-group-addon">
                                            <i class="glyphicon glyphicon-user"></i>
                                        </span>
                                    <div class="change_margin_1 input-group" style="width: 100%;">
                                        <input id="xm" name="name" class="user form-control"  placeholder="请输入姓名：" maxlength="12" type="text">
                                    </div>
                                </div>
                                <%--<span id="yhmts" style="color: red">姓名输入错误</span>--%>
                            </div>
                            <br>

                            <!--输入密码-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <span class="input-group-addon">
                                        <i class="glyphicon glyphicon-lock"></i>
                                    </span>
                                    <div class="input-group" style="width: 100%">
                                        <input id="password1" class="form-control" name="password"  placeholder="请输入密码：6-20位" minlength="6" maxlength="20" type="password" >
                                    </div>
                                    <!--<div class="col-xs-2">-->
                                    <!--<span class="passwordInfo"></span>-->
                                    <!--</div>-->
                                </div>
                                <span id="tsk" style="color: red">密码输入位数不足</span>
                            </div>
                            <!--确认密码-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <span class="input-group-addon">
                                        <i class="glyphicon glyphicon-lock"></i>
                                    </span>
                                    <div class="input-group" style="width: 100%">
                                        <input id="password2" class="form-control" name="password2"  placeholder="请再次输入密码：6-20位" minlength="6" maxlength="20" type="password" >
                                    </div>
                                    <!--<div class="col-xs-2">-->
                                    <!--<span class="passwordInfo"></span>-->
                                    <!--</div>-->
                                </div>
                                <span id="qrts" style="color: red">密码核对失败</span>
                            </div>

                            <!--身份证号码-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <span class="input-group-addon">
                                        <i class="glyphicon glyphicon-calendar"></i>
                                    </span>
                                    <div class="input-group" style="width: 100%">
                                        <input id="number" class="col-xs-6 form-control" placeholder="请输入身份证号码" maxlength="18" type="text" name="idCard">
                                    </div>
                                </div>
                                <span id="sfts" style="color: red">身份证输入位数不足</span>
                            </div>

                            <!--地区信息-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <div class="input-group" style="width: 100%">
                                        <select class="select2" id="city" name="countryCode">
                                            <option value="">选择市</option>
                                        </select>
                                        <select class="select2" id="area" name="villageCode">
                                            <option value="">选择区</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <!--学校信息-->
                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <div class="input-group" style="width: 100%;" >
                                        <select class="select1" id="school" name="schoolCode" onclick="getOrg();return false;">
                                            <option value="">选择学校</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <br>
                            <!--年级信息-->

                            <div class="input-icon-group">
                                <div class="col-xs-8 col-xs-offset-2 input-group">
                                    <div class="input-group" style="width: 100%;">
                                        <select class="select2" id="grade" name="grade">
                                            <option>选择年级</option>
                                            <option value="1">一年级</option>
                                            <option value="2">二年级</option>
                                            <option value="3">三年级</option>
                                            <option value="4">四年级</option>
                                            <option value="5">五年级</option>
                                            <option value="6">六年级</option>
                                            <option value="7">七年级</option>
                                            <option value="8">八年级</option>
                                            <option value="9">九年级</option>
                                        </select>

                                        <div class="col-xs-6 input-group" style="float: left">
                                            <div  style="width: 100%;padding-bottom: 16px;">
                                                <input id="class" class="form-control" placeholder="输入班级纯数字如：1"  type="text" name="classes">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <span id="bjts" class=" col-xs-8 col-xs-offset-6" style="color: red;float: right">班级输入错误</span>
                            </div>

                            <!--验证码-->
                            <div class="input-icon-group " >
                                <div class="col-xs-4 col-xs-offset-2 input-group" style="float: left">
                                    <div class="input-group" style="width: 100%;padding-bottom: 16px;">
                                        <span class="input-group-addon"><span class="glyphicon glyphicon-qrcode"></span></span>
                                        <input id="idcode-btn" id="imagecode" class="form-control" placeholder="验证码" maxlength="6" type="text" name="yzm">
                                    </div>
                                </div>
                                <div style="float: left ;width: 30%;height: 34px;margin-left: 10px; cursor: pointer;" class="col-xs-4">
                                    <!--验证码图片-->
                                    <img src="${path}/imageCode" id="checkimagecode" onclick="getCode();return false;">
                                </div>
                            </div>
                            <br>

                            <!--按钮-->
                            <div class="form-group">
                                <div class="col-xs-8" style="width: 100%">
                                    <button class="btn1 btn-success form-group" type="button" onclick="doSubmit();return false;">注册</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="${path}/resources/js/player/SoccerLogin.js"></script>
<script src="${path}/resources/js/player/District.js"></script>
<script src="${path}/resources/lib/jquery/jquery-3.1.1.min.js"></script>
<script src="${path}/resources/lib/bootstrap/bootstrap.min.js"></script>
<script src="${path}/resources/lib/jquery/jquery-1.11.3.js"></script>
<script src="${path}/resources/js/player/SoccerRegist.js"></script>
<script src="${path}/resources/lib/layer/layer.js"></script>
<script src="${path}/resources/js/index.js"></script>
<script type="text/javascript">
    function getOrg(){
        var countryCode = $("#city option:selected").val();
        var villageCode = $("#area option:selected").val();
        if(countryCode==null||villageCode==null){
            layer.msg("请先选择市、区，再选择学校")
        }
        ajax({
            type: "POST",   //提交的方法
            url:"/organization/showorg", //提交的地址
            data:{
                "countrycode":countryCode,
                "villagecode":villageCode
            },
            dataType:'json',
            success: function(data) {  //成功
                $.each( data.data.OrgList,function(index,item){
                    $("#school").append("<option value='"+item.schoolCode+"'>"+item.name+"</option>");
                });
            },
            error: function(data) {  //失败的话
                msg("请求错误");
            }
        });
    }
    function doSubmit() {
        ajax({
            type: "POST",   //提交的方法
            url:"/player/register2", //提交的地址
            data:
                $('#register1').serialize(),
            dataType:'json',
            success: function(data) {  //成功
                switch(data.status){
                    case 0:
                        layer.alert("注册成功，是否跳转到登录页面");
                        break;
                    case 1:
                        layer.msg("密码或验证码输入错误");
                        break;
                    case 12:
                        layer.msg("验证码输入错误");
                        break;
                    case 20:
                        layer.msg("身份证号已存在");
                        break;
                    case 21:
                        layer.msg("非法字符、位数、格式或其他错误");
                        break;
                }
            },
            error: function() {  //失败的话
                layer.alert("请求异常");
            }
        });
    }
    function getCode()
    {
        $("#imagecode").val("");
        $("#checkimagecode").attr('src',"${path}/imageCode?abc="+Math.random())//MAth.random是为了避免缓冲
    }
</script>
</body>
</html>
