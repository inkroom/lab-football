<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nsu.dao.student.score.ScoreDao">

    <select id="getSchools" statementType="PREPARED" resultType="com.nsu.bean.student.score.SchoolBean">
		select O_ID AS id,O_NAME AS name from org;
	</select>

    <select id="getScores" statementType="PREPARED" resultType="com.nsu.bean.student.score.ScoreBean">
        SELECT l.SCHOOL,l.T_NAME AS name,
        s.DO_NO AS number,s.INTEGRAL AS score,c.GRED AS grade
        FROM login_information AS l,student AS s,account AS a,class AS c
        <where>
            <if test="school != null">
                l.SCHOOL=#{school}
            </if>
            <if test="school == null">
                <if test="isStudent">
                    l.T_NAME LIKE #{name}
                </if>
                <if test="!isStudent">
                    l.SCHOOL LIKE #{name}
                </if>
            </if>
            AND l.A_ID = s.A_ID
            AND l.A_ID = a.A_ID
            AND a.PARENT_ID=c.CLASS_ID
        </where>
        ORDER BY s.INTEGRAL DESC
    </select>

</mapper>